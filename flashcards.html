<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuizVerse - Smart Flashcards | Enhanced Learning System</title>
  <meta name="description"
    content="Revolutionize your learning with our AI-powered flashcard system featuring spaced repetition, multimedia support, and progress tracking.">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap"
    rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js">
  </script>
  <!-- Tailwind CSS -->
  <link rel="stylesheet" href="dist/style.css">
  <link rel="stylesheet" href="src/index.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Poppins', 'sans-serif'],
            heading: ['Montserrat', 'sans-serif'],
          },
          colors: {
            primary: {
              DEFAULT: '#2D6A4F',
              dark: '#1B4332',
            },
            secondary: {
              DEFAULT: '#40916C',
              dark: '#2D6A4F',
            },
            accent: {
              DEFAULT: '#FFB703',
              dark: '#FB8500',
            },
            science: '#0077B6',
            general: '#F77F00',
            poetry: '#D4A5A5',
            history: '#7B5E57',
            islamic: '#2A9D8F',
            tech: '#3A0CA3',
            arts: '#7209B7',
            kids: '#90E0EF',
            boys: '#5D737E',
            girls: '#FFCDB2',
            bgLight: '#F9F9F9',
            bgDark: '#121212',
            textDark: '#1D1D1D',
            textLight: '#FFFFFF',
          },
          animation: {
            'card-bounce': 'bounce 1s infinite',
            'pulse-slow': 'pulse 3s infinite',
            'float': 'float 6s ease-in-out infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            }
          }
        }
      }
    }
  </script>
  <style>
    html {
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .flip-card {
      perspective: 2000px;
    }

    .flip-card-inner {
      transition: transform 0.8s;
      transform-style: preserve-3d;
      position: relative;
    }

    .flip-card.flipped .flip-card-inner {
      transform: rotateY(180deg);
    }

    .flip-card-front,
    .flip-card-back {
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .flip-card-back {
      transform: rotateY(180deg);
    }

    /* Custom scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.1);
      border-radius: 10px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: rgba(0, 0, 0, 0.3);
    }

    /* Card shine effect */
    .card-shine {
      position: relative;
      overflow: hidden;
    }

    .card-shine::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(to bottom right,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0) 30%,
          rgba(255, 255, 255, 0.1) 45%,
          rgba(255, 255, 255, 0.05) 50%,
          rgba(255, 255, 255, 0) 60%,
          rgba(255, 255, 255, 0) 100%);
      transform: rotate(30deg);
      transition: all 0.3s;
      opacity: 0;
    }

    .card-shine:hover::after {
      animation: shine 1.5s ease-out infinite;
      opacity: 1;
    }

    @keyframes shine {
      0% {
        left: -50%;
        top: -50%;
      }

      100% {
        left: 150%;
        top: 150%;
      }
    }

    /* Gradient text */
    .text-gradient {
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
    }

    /* Deck card hover effect */
    .deck-card {
      transition: all 0.3s ease;
      transform-origin: center;
    }

    .deck-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    /* Progress ring */
    .progress-ring {
      transform: rotate(-90deg);
    }

    .progress-ring-circle {
      stroke-dasharray: 283;
      stroke-dashoffset: 283;
      transition: stroke-dashoffset 0.5s;
    }

    /* Text visibility fixes */
    .flip-card-front {
      color: #1D1D1D !important;
      /* Force dark text on light background */
    }

    .dark .flip-card-front {
      color: #FFFFFF !important;
      /* Force light text on dark background */
    }

    .flip-card-back {
      color: #FFFFFF !important;
      /* Always white text on back */
    }

    /* Confetti canvas fix */
    #confetti-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1000;
      pointer-events: none;
      display: none;
    }
  </style>
  <style>
  /* Dark mode fixes */
  .dark .bg-white {
    background-color: var(--tw-bg-opacity);
  }
  
  .dark .bg-gray-50 {
    background-color: rgba(17, 24, 39, var(--tw-bg-opacity));
  }
  
  .dark .bg-gradient-to-b {
    background-image: linear-gradient(to bottom, var(--tw-gradient-stops));
  }
  
  .dark .from-white {
    --tw-gradient-from: #111827 var(--tw-gradient-from-position);
    --tw-gradient-to: rgba(17, 24, 39, 0) var(--tw-gradient-to-position);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }
  
  .dark .to-gray-50 {
    --tw-gradient-to: #1f2937 var(--tw-gradient-to-position);
  }
  
  /* Fix progress chart background in dark mode */
  .dark .bg-gray-900 {
    background-color: rgba(17, 24, 39, var(--tw-bg-opacity));
  }
  
  /* Fix card shine effect in dark mode */
  .dark .card-shine::after {
    background: linear-gradient(to bottom right,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0) 30%,
      rgba(255, 255, 255, 0.05) 45%,
      rgba(255, 255, 255, 0.02) 50%,
      rgba(255, 255, 255, 0) 60%,
      rgba(255, 255, 255, 0) 100%);
  }
  
  /* Fix text colors in dark mode */
  .dark .text-gray-600 {
    color: rgba(156, 163, 175, var(--tw-text-opacity));
  }
  
  .dark .text-gray-800 {
    color: rgba(31, 41, 55, var(--tw-text-opacity));
  }
</style>
</head>

<body
  class="font-sans bg-bgLight text-textDark dark:bg-bgDark dark:text-textLight transition-colors duration-300 min-h-screen flex flex-col">
  <!-- Header Section -->
  <header class="sticky top-0 z-50 bg-primary text-white shadow-lg backdrop-blur-sm bg-opacity-90">
    <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center">
          <i class="fas fa-brain text-xl text-accent"></i>
        </div>
        <a href="index.html" class="text-xl font-bold font-heading">QuizVerse</a>
      </div>

      <div class="hidden md:flex space-x-8">
        <a href="index.html" class="hover:text-accent transition">Home</a>

        <a href="quiz-categories.html" class="hover:text-accent transition">Quizzes</a>
        <a href="learning-categories.html" class="hover:text-accent transition">Learning Hub</a>
        <a href="personality.html" class="hover:text-accent transition">Personality Tests</a>
        <a href="#features" class="hover:text-accent transition flex items-center">
          <i class="fas fa-star mr-2"></i> Features
        </a>
        <a href="#decks" class="hover:text-accent transition flex items-center">
          <i class="fas fa-layer-group mr-2"></i> Decks
        </a>
        <a href="#progress" class="hover:text-accent transition flex items-center">
          <i class="fas fa-chart-line mr-2"></i> Progress
        </a>
        <a href="#community" class="hover:text-accent transition flex items-center">
          <i class="fas fa-users mr-2"></i> Community
        </a>
      </div>

      <div class="flex items-center space-x-4">
        <button id="theme-toggle" class="p-2 rounded-full hover:bg-primary-dark transition">
          <i class="fas fa-moon dark:hidden"></i>
          <i class="fas fa-sun hidden dark:block"></i>
        </button>

        <button id="mobile-menu-button" class="md:hidden p-2 rounded-full hover:bg-primary-dark transition">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="md:hidden hidden bg-primary-dark text-white px-6 py-4">
      <div class="flex flex-col space-y-4">
        <a href="index.html" class="hover:text-accent transition">Home</a>
        <a href="quiz-categories.html" class="hover:text-accent transition">Quizzes</a>
        <a href="learning-categories.html" class="hover:text-accent transition">Learning Hub</a>
        <a href="personality.html" class="hover:text-accent transition">Personality Tests</a>
        <a href="#features" class="hover:text-accent transition flex items-center">
          <i class="fas fa-star mr-3"></i> Features
        </a>
        <a href="#decks" class="hover:text-accent transition flex items-center">
          <i class="fas fa-layer-group mr-3"></i> Decks
        </a>
        <a href="#progress" class="hover:text-accent transition flex items-center">
          <i class="fas fa-chart-line mr-3"></i> Progress
        </a>
        <a href="#community" class="hover:text-accent transition flex items-center">
          <i class="fas fa-users mr-3"></i> Community
        </a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-grow">
    <!-- Hero Section -->
    <section class="relative overflow-hidden pt-20 pb-16">
      <div class="absolute inset-0 opacity-10 dark:opacity-5">
        <div
          class="absolute top-0 left-1/4 w-72 h-72 bg-accent rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob">
        </div>
        <div
          class="absolute top-0 right-1/4 w-72 h-72 bg-primary rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000">
        </div>
        <div
          class="absolute bottom-0 left-1/2 w-72 h-72 bg-secondary rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000">
        </div>
      </div>

      <div class="container mx-auto px-4 relative z-10">
        <div class="flex flex-col lg:flex-row items-center">
          <div class="lg:w-1/2 mb-10 lg:mb-0">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold font-heading mb-6 leading-tight">
              <span class="text-gradient bg-gradient-to-r from-primary to-accent">Supercharge</span> Your Memory
            </h1>
            <p class="text-lg md:text-xl mb-8 text-gray-600 dark:text-gray-300 max-w-lg">
              Our smart flashcard system uses spaced repetition and AI to help you learn faster and retain information
              longer.
            </p>

            <div class="flex flex-wrap gap-4">
              <a href="learning-categories.html" id="start-learning"
                class="bg-gradient-to-r from-accent to-accent-dark hover:from-accent-dark hover:to-accent text-white font-bold px-8 py-3 rounded-xl transition-all shadow-lg hover:shadow-xl flex items-center">
                Start Learning <i class="fas fa-arrow-right ml-3"></i>
              </a>
              <a href="#features"
                class="bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 text-textDark dark:text-textLight font-bold px-8 py-3 rounded-xl transition-all shadow-lg hover:shadow-xl flex items-center border border-gray-200 dark:border-gray-700">
                <i class="fas fa-play-circle mr-3"></i> How It Works
              </a>
            </div>

            <div class="mt-10 flex items-center space-x-6">
              <div class="flex -space-x-2">
                <img src="https://randomuser.me/api/portraits/women/44.jpg"
                  class="w-10 h-10 rounded-full border-2 border-white dark:border-gray-800" alt="User">
                <img src="https://randomuser.me/api/portraits/men/32.jpg"
                  class="w-10 h-10 rounded-full border-2 border-white dark:border-gray-800" alt="User">
                <img src="https://randomuser.me/api/portraits/women/68.jpg"
                  class="w-10 h-10 rounded-full border-2 border-white dark:border-gray-800" alt="User">
              </div>
              <div>
                <p class="text-sm font-medium">Join <span class="text-primary font-bold">10,000+</span> learners</p>
                <div class="flex items-center">
                  <i class="fas fa-star text-yellow-400 mr-1"></i>
                  <span class="text-sm">4.9 (1.2k reviews)</span>
                </div>
              </div>
            </div>
          </div>

          <div class="lg:w-1/2 flex justify-center">
            <div class="relative w-full max-w-md">
              <div class="absolute -top-6 -left-6 w-32 h-32 bg-accent/20 rounded-full"></div>
              <div class="absolute -bottom-6 -right-6 w-32 h-32 bg-primary/20 rounded-full"></div>

              <div id="hero-flashcard" class="flip-card w-full h-80 cursor-pointer relative z-10">
                <div class="flip-card-inner h-full">
                  <div
                    class="flip-card-front bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 flex flex-col items-center justify-center border-0 h-full card-shine">
                    <div class="text-center">
                      <div
                        class="w-16 h-16 bg-accent/10 text-accent rounded-xl flex items-center justify-center mb-6 mx-auto">
                        <i class="fas fa-atom text-2xl"></i>
                      </div>
                      <h3 class="text-2xl font-bold font-heading mb-3">What is the powerhouse of the cell?</h3>
                      <p class="text-gray-500 dark:text-gray-400">Click to reveal answer</p>
                    </div>
                  </div>
                  <div
                    class="flip-card-back bg-gradient-to-br from-primary to-primary-dark text-white rounded-2xl shadow-2xl p-8 flex flex-col items-center justify-center border-0 h-full">
                    <div class="text-center">
                      <div
                        class="w-16 h-16 bg-white/10 text-white rounded-xl flex items-center justify-center mb-6 mx-auto">
                        <i class="fas fa-lightbulb text-2xl"></i>
                      </div>
                      <h3 class="text-2xl font-bold font-heading mb-3">Mitochondria</h3>
                      <div class="flex justify-center space-x-4 mt-6">
                        <button
                          class="w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center transition">
                          <i class="fas fa-check"></i>
                        </button>
                        <button
                          class="w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center transition">
                          <i class="fas fa-redo"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-16 bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 ">
      <div class="container mx-auto px-4">
        <div class="text-center mb-16">
          <span class="inline-block px-3 py-1 text-sm font-medium rounded-full bg-accent/10 text-accent mb-4">WHY CHOOSE
            US</span>
          <h2 class="text-3xl md:text-4xl font-bold font-heading mb-4">Smart Learning Features</h2>
          <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">Our platform combines proven learning
            techniques with modern technology to maximize your retention.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div
            class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 transition-all hover:shadow-xl">
            <div class="w-14 h-14 bg-primary/10 text-primary rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-brain text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">Spaced Repetition</h3>
            <p class="text-gray-600 dark:text-gray-300">Our algorithm schedules reviews at optimal intervals to combat
              forgetting and strengthen memory.</p>
          </div>

          <div
            class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 transition-all hover:shadow-xl">
            <div class="w-14 h-14 bg-secondary/10 text-secondary rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-chart-pie text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">Progress Analytics</h3>
            <p class="text-gray-600 dark:text-gray-300">Detailed statistics and visualizations to track your learning
              journey and identify weak areas.</p>
          </div>

          <div
            class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 transition-all hover:shadow-xl">
            <div class="w-14 h-14 bg-accent/10 text-accent rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-microphone-alt text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">Voice Recognition</h3>
            <p class="text-gray-600 dark:text-gray-300">Practice pronunciation and test recall with our speech-to-text
              verification system.</p>
          </div>

          <div
            class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 transition-all hover:shadow-xl">
            <div class="w-14 h-14 bg-science/10 text-science rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-mobile-alt text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">Mobile Friendly</h3>
            <p class="text-gray-600 dark:text-gray-300">Learn anywhere with our responsive design and offline
              capabilities.</p>
          </div>

          <div
            class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 transition-all hover:shadow-xl">
            <div class="w-14 h-14 bg-history/10 text-history rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-users text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">Community Decks</h3>
            <p class="text-gray-600 dark:text-gray-300">Access thousands of user-created decks or share your own with
              the community.</p>
          </div>

          <div
            class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 transition-all hover:shadow-xl">
            <div class="w-14 h-14 bg-islamic/10 text-islamic rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-robot text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">AI Assistance</h3>
            <p class="text-gray-600 dark:text-gray-300">Get personalized recommendations and automatic card generation
              based on your progress.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Flashcard Deck Selector -->
    <section id="decks" class="py-16">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
          <div>
            <span
              class="inline-block px-3 py-1 text-sm font-medium rounded-full bg-primary/10 text-primary mb-3">LEARNING
              MATERIALS</span>
            <h2 class="text-3xl md:text-4xl font-bold font-heading mb-2">Featured Flashcard Decks</h2>
            <p class="text-gray-600 dark:text-gray-300">Browse our carefully curated collection of flashcard decks for
              all levels.</p>
          </div>
          <div class="flex items-center space-x-3 mt-4 md:mt-0">
            <button id="filter-group"
              class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 text-sm font-medium flex items-center transition">
              <i class="fas fa-filter mr-2"></i> <span>All Groups</span>
            </button>
            <button id="shuffle-decks"
              class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 text-sm font-medium flex items-center transition">
              <i class="fas fa-random mr-2"></i> Shuffle
            </button>
          </div>
        </div>

        <div id="deck-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
          <!-- Decks will be loaded here dynamically -->
          <div class="col-span-full text-center py-12">
            <div class="inline-flex items-center justify-center space-x-4">
              <div class="w-8 h-8 bg-primary rounded-full animate-bounce"></div>
              <div class="w-8 h-8 bg-secondary rounded-full animate-bounce animation-delay-100"></div>
              <div class="w-8 h-8 bg-accent rounded-full animate-bounce animation-delay-200"></div>
            </div>
            <p class="mt-4 text-gray-500 dark:text-gray-400">Loading flashcard decks...</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Flashcard Display Area (Hidden by default) -->
    <section id="flashcard-display" class="hidden py-16 bg-gray-50 dark:bg-gray-900">
      <div class="container mx-auto px-4">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
          <div>
            <h2 class="text-3xl md:text-4xl font-bold font-heading mb-2" id="current-deck-title">Flashcards</h2>
            <div class="flex items-center space-x-4">
              <span id="deck-category"
                class="px-3 py-1 text-xs font-medium rounded-full bg-primary/10 text-primary"></span>
              <span id="deck-group"
                class="px-3 py-1 text-xs font-medium rounded-full bg-secondary/10 text-secondary"></span>
            </div>
          </div>
          <div class="flex items-center space-x-3 mt-4 md:mt-0">
            <button id="change-mode"
              class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 text-sm font-medium flex items-center transition">
              <i class="fas fa-eye mr-2"></i> <span id="mode-text">Text Only</span>
            </button>
            <button id="shuffle-cards"
              class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 text-sm font-medium flex items-center transition">
              <i class="fas fa-random mr-2"></i> Shuffle
            </button>
            <button id="back-to-decks"
              class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 px-4 py-2 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 text-sm font-medium flex items-center transition">
              <i class="fas fa-arrow-left mr-2"></i> Back
            </button>
          </div>
        </div>

        <!-- Progress Indicator -->
        <div
          class="mb-8 bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700">
          <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4">
            <div class="flex items-center space-x-4 mb-4 md:mb-0">
              <div class="relative w-16 h-16">
                <svg class="progress-ring w-16 h-16" viewBox="0 0 100 100">
                  <circle class="progress-ring-circle stroke-gray-200 dark:stroke-gray-700" stroke-width="8"
                    fill="transparent" r="45" cx="50" cy="50" />
                  <circle class="progress-ring-circle stroke-primary" stroke-width="8" fill="transparent" r="45" cx="50"
                    cy="50" />
                </svg>
                <div class="absolute inset-0 flex items-center justify-center font-bold text-primary"
                  id="progress-percent">0%</div>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Deck Progress</p>
                <p class="text-xl font-bold" id="card-progress-text">0/0 cards</p>
              </div>
            </div>

            <div class="flex items-center space-x-6">
              <div class="text-center">
                <div class="flex items-center justify-center space-x-1">
                  <span class="text-2xl font-bold text-primary" id="streak-count">0</span>
                  <i class="fas fa-fire text-accent"></i>
                </div>
                <p class="text-sm text-gray-500 dark:text-gray-400">Day Streak</p>
              </div>

              <div class="text-center">
                <div class="text-2xl font-bold text-secondary" id="cards-mastered">0</div>
                <p class="text-sm text-gray-500 dark:text-gray-400">Mastered</p>
              </div>

              <div class="text-center">
                <div class="text-2xl font-bold text-accent" id="cards-due">0</div>
                <p class="text-sm text-gray-500 dark:text-gray-400">Due Today</p>
              </div>
            </div>
          </div>

          <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
            <div id="progress-bar" class="bg-gradient-to-r from-primary to-secondary h-3 rounded-full"
              style="width: 0%"></div>
          </div>
        </div>

        <!-- Flashcard Container -->
        <div class="flex justify-center mb-10">
          <div id="flashcard" class="flip-card w-full max-w-3xl cursor-pointer" style="min-height: 400px;">
            <div class="flip-card-inner h-full">
              <div
                class="flip-card-front bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 flex flex-col items-center justify-center border-0 h-full card-shine">
                <div id="front-content" class="text-center w-full">
                  <!-- Front content will be loaded here -->
                </div>
                <div class="mt-6 text-sm text-gray-500 dark:text-gray-400 flex items-center">
                  <i class="fas fa-hand-pointer mr-2"></i> Click or press Space to flip
                </div>
              </div>
              <div
                class="flip-card-back bg-gradient-to-br from-primary to-primary-dark text-white rounded-2xl shadow-xl p-8 flex flex-col items-center justify-center border-0 h-full">
                <div id="back-content" class="text-center text-black w-full">
                  <!-- Back content will be loaded here -->
                </div>
                <div class="flex space-x-4 mt-8">
                  <button id="difficult-card"
                    class="px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition flex items-center">
                    <i class="fas fa-times-circle mr-2"></i> Difficult
                  </button>
                  <button id="mark-learned"
                    class="px-6 py-2 bg-white hover:bg-gray-100 text-primary rounded-lg transition flex items-center font-medium">
                    <i class="fas fa-check-circle mr-2"></i> Got It!
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card Navigation -->
        <div class="flex flex-wrap justify-center gap-4">
          <button id="prev-card"
            class="bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-textDark dark:text-textLight font-medium px-6 py-3 rounded-xl transition-all shadow-sm hover:shadow-md border border-gray-200 dark:border-gray-700 flex items-center">
            <i class="fas fa-arrow-left mr-2"></i> Previous
          </button>
          <button id="next-card"
            class="bg-primary hover:bg-primary-dark text-white font-medium px-6 py-3 rounded-xl transition-all shadow-sm hover:shadow-md flex items-center">
            Next <i class="fas fa-arrow-right ml-2"></i>
          </button>
        </div>
      </div>
    </section>

    <!-- Progress Tracking Section -->
    <section id="progress" class="py-16 bg-gradient-to-b from-white to-gray-50 dark:from-gray-900 dark:to-gray-800">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <span class="inline-block px-3 py-1 text-sm font-medium rounded-full bg-secondary/10 text-secondary mb-4">YOUR
            JOURNEY</span>
          <h2 class="text-3xl md:text-4xl font-bold font-heading mb-4">Learning Statistics</h2>
          <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">Track your progress and stay motivated
            with detailed analytics.</p>
        </div>

        <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700">
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
            <div class="text-center">
              <div class="text-5xl font-bold text-primary mb-3" id="total-cards-learned">0</div>
              <p class="text-gray-600 dark:text-gray-300 font-medium">Cards Mastered</p>
              <div class="h-1 bg-gradient-to-r from-primary to-transparent w-24 mx-auto mt-3 rounded-full"></div>
            </div>
            <div class="text-center">
              <div class="text-5xl font-bold text-accent mb-3" id="current-streak">0</div>
              <p class="text-gray-600 dark:text-gray-300 font-medium">Day Streak</p>
              <div class="h-1 bg-gradient-to-r from-accent to-transparent w-24 mx-auto mt-3 rounded-full"></div>
            </div>
            <div class="text-center">
              <div class="text-5xl font-bold text-secondary mb-3" id="total-decks-completed">0</div>
              <p class="text-gray-600 dark:text-gray-300 font-medium">Decks Completed</p>
              <div class="h-1 bg-gradient-to-r from-secondary to-transparent w-24 mx-auto mt-3 rounded-full"></div>
            </div>
            <div class="text-center">
              <div class="text-5xl font-bold text-science mb-3" id="study-time">0</div>
              <p class="text-gray-600 dark:text-gray-300 font-medium">Hours Studied</p>
              <div class="h-1 bg-gradient-to-r from-science to-transparent w-24 mx-auto mt-3 rounded-full"></div>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
              <h3 class="text-xl font-bold font-heading mb-6">Learning Progress</h3>
              <div class="bg-gray-50 dark:bg-gray-900 p-6 rounded-xl">
                <canvas id="progress-chart" height="300"></canvas>
              </div>
            </div>

            <div>
              <h3 class="text-xl font-bold font-heading mb-6">Recently Mastered</h3>
              <div id="recent-cards" class="space-y-4">
                <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg animate-pulse">
                  <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-3"></div>
                  <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div>
                </div>
                <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg animate-pulse">
                  <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3 mb-3"></div>
                  <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div>
                </div>
                <div class="bg-gray-50 dark:bg-gray-900 p-4 rounded-lg animate-pulse">
                  <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-3"></div>
                  <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Community Section -->
    <section id="community" class="py-16">
      <div class="container mx-auto px-4">
        <div class="text-center mb-12">
          <span
            class="inline-block px-3 py-1 text-sm font-medium rounded-full bg-islamic/10 text-islamic mb-4">COMMUNITY</span>
          <h2 class="text-3xl md:text-4xl font-bold font-heading mb-4">Join Our Learning Community</h2>
          <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">Connect with other learners, share
            decks, and participate in challenges.</p>
        </div>

        <div class="bg-gradient-to-r from-primary to-secondary p-1 rounded-2xl shadow-xl mb-12">
          <div class="bg-white dark:bg-gray-900 rounded-xl p-8">
            <div class="flex flex-col md:flex-row items-center">
              <div class="md:w-1/2 mb-8 md:mb-0">
                <h3 class="text-2xl font-bold font-heading mb-4">Create & Share Your Own Decks</h3>
                <p class="text-gray-600 dark:text-gray-300 mb-6">Contribute to our growing library of educational
                  content and help others learn.</p>
                <button
                  class="bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white font-medium px-6 py-3 rounded-lg transition-all shadow hover:shadow-lg flex items-center">
                  <i class="fas fa-plus-circle mr-2"></i> Create Deck
                </button>
              </div>
              <div class="md:w-1/2 flex justify-center">
                <div class="relative">
                  <div class="absolute -top-4 -left-4 w-32 h-32 bg-accent/20 rounded-full animate-float"></div>
                  <div
                    class="absolute -bottom-4 -right-4 w-32 h-32 bg-primary/20 rounded-full animate-float animation-delay-2000">
                  </div>
                  <img src="https://illustrations.popsy.co/amber/digital-nomad.svg"
                    class="relative z-10 max-w-md w-full" alt="Community Illustration">
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700">
            <div class="w-14 h-14 bg-primary/10 text-primary rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-trophy text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">Weekly Challenges</h3>
            <p class="text-gray-600 dark:text-gray-300 mb-4">Compete in our weekly learning challenges and earn badges
              for your profile.</p>
            <a href="#" class="text-primary font-medium flex items-center">
              Join Challenge <i class="fas fa-arrow-right ml-2"></i>
            </a>
          </div>

          <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700">
            <div class="w-14 h-14 bg-secondary/10 text-secondary rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-comments text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">Discussion Forums</h3>
            <p class="text-gray-600 dark:text-gray-300 mb-4">Get help from our community of learners and educators in
              our active forums.</p>
            <a href="#" class="text-secondary font-medium flex items-center">
              Visit Forums <i class="fas fa-arrow-right ml-2"></i>
            </a>
          </div>

          <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700">
            <div class="w-14 h-14 bg-accent/10 text-accent rounded-xl flex items-center justify-center mb-6">
              <i class="fas fa-user-graduate text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold font-heading mb-3">Expert Content</h3>
            <p class="text-gray-600 dark:text-gray-300 mb-4">Access premium decks created by educators and subject
              matter experts.</p>
            <a href="#" class="text-accent font-medium flex items-center">
              Browse Experts <i class="fas fa-arrow-right ml-2"></i>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-16 bg-gradient-to-r from-primary to-primary-dark text-white">
      <div class="container mx-auto px-4 text-center">
        <h2 class="text-3xl md:text-4xl font-bold font-heading mb-6">Ready to Boost Your Learning?</h2>
        <p class="text-xl opacity-90 mb-8 max-w-2xl mx-auto">Join thousands of students and professionals who are
          learning smarter with BrainBoost.</p>
        <div class="flex flex-wrap justify-center gap-4">
          <button id="start-learning-cta"
            class="bg-white hover:bg-gray-100 text-primary font-bold px-8 py-4 rounded-xl transition-all shadow-lg hover:shadow-xl flex items-center text-lg">
            Start Learning Now <i class="fas fa-arrow-right ml-3"></i>
          </button>
          <a href="#"
            class="bg-white/10 hover:bg-white/20 border border-white/20 text-white font-bold px-8 py-4 rounded-xl transition-all shadow-lg hover:shadow-xl flex items-center text-lg">
            <i class="fas fa-play-circle mr-3"></i> Watch Demo
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
        <div>
          <div class="flex items-center space-x-2 mb-4">
            <i class="fas fa-brain text-2xl text-accent"></i>
            <span class="text-xl font-bold">QuizVerse</span>
          </div>
          <p class="text-gray-400 mb-4">Your gateway to interactive learning and knowledge exploration.</p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-twitter"></i></a>
            <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
            <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
        <div>
          <h4 class="text-lg font-bold mb-4">Explore</h4>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition">Topics</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">Learning Paths</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">Daily Challenges</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">Knowledge Hub</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">Community</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-bold mb-4">Resources</h4>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition">Help Center</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">Learning Tips</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">Blog</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">Webinars</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition">Educator Resources</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-lg font-bold mb-4">Get In Touch</h4>
          <ul class="space-y-2">
            <li class="flex items-start space-x-2">
              <i class="fas fa-envelope mt-1 text-gray-400"></i>
              <a href="mailto:info@quizverse.com"
                class="text-gray-400 hover:text-white transition">info@quizverse.com</a>
            </li>
            <li class="flex items-start space-x-2">
              <i class="fas fa-phone-alt mt-1 text-gray-400"></i>
              <a href="tel:+1234567890" class="text-gray-400 hover:text-white transition">+1 (234) 567-890</a>
            </li>
            <li class="flex items-start space-x-2">
              <i class="fas fa-map-marker-alt mt-1 text-gray-400"></i>
              <span class="text-gray-400">123 Knowledge St, Learning City</span>
            </li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-700 pt-6 text-center text-gray-400 text-sm">
        <p>Â© 2023 QuizVerse. All rights reserved. | <a href="#" class="hover:text-white transition">Privacy Policy</a> |
          <a href="#" class="hover:text-white transition">Terms of Service</a>
        </p>
      </div>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <button id="back-to-top"
    class="fixed bottom-6 right-6 bg-primary text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center opacity-0 invisible transition-all duration-300 hover:bg-primary-dark">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- Loading Overlay -->
  <div id="loading-overlay"
    class="fixed inset-0 bg-white dark:bg-gray-900 z-50 flex flex-col items-center justify-center transition-opacity duration-300">
    <div class="relative w-24 h-24 mb-6">
      <div
        class="absolute inset-0 rounded-full border-4 border-t-primary border-r-secondary border-b-accent border-l-transparent animate-spin">
      </div>
      <div
        class="absolute inset-4 rounded-full border-4 border-t-secondary border-r-accent border-b-primary border-l-transparent animate-spin animation-delay-200">
      </div>
      <div
        class="absolute inset-8 rounded-full border-4 border-t-accent border-r-primary border-b-secondary border-l-transparent animate-spin animation-delay-400">
      </div>
    </div>
    <p class="text-lg font-medium">Loading BrainBoost...</p>
  </div>

  <!-- Confetti Canvas -->
  <canvas id="confetti-canvas" class="fixed top-0 left-0 w-full h-full pointer-events-none z-40"
    style="display: none;"></canvas>

  <!-- JavaScript -->
  <script>
    // QuizVerse Flashcard System
    document.addEventListener('DOMContentLoaded', function () {
      // DOM Elements
      const deckContainer = document.getElementById('deck-container');
      const flashcardDisplay = document.getElementById('flashcard-display');
      const flashcard = document.getElementById('flashcard');
      const frontContent = document.getElementById('front-content');
      const backContent = document.getElementById('back-content');
      const cardProgressText = document.getElementById('card-progress-text');
      const progressBar = document.getElementById('progress-bar');
      const progressPercent = document.getElementById('progress-percent');
      const prevCardBtn = document.getElementById('prev-card');
      const nextCardBtn = document.getElementById('next-card');
      const markLearnedBtn = document.getElementById('mark-learned');
      const difficultCardBtn = document.getElementById('difficult-card');
      const backToDecksBtn = document.getElementById('back-to-decks');
      const shuffleCardsBtn = document.getElementById('shuffle-cards');
      const changeModeBtn = document.getElementById('change-mode');
      const modeText = document.getElementById('mode-text');
      const currentDeckTitle = document.getElementById('current-deck-title');
      const deckCategory = document.getElementById('deck-category');
      const deckGroup = document.getElementById('deck-group');
      const startLearningBtn = document.getElementById('start-learning');
      const startLearningCta = document.getElementById('start-learning-cta');
      const filterGroupBtn = document.getElementById('filter-group');
      const shuffleDecksBtn = document.getElementById('shuffle-decks');
      const streakCount = document.getElementById('streak-count');
      const totalCardsLearned = document.getElementById('total-cards-learned');
      const currentStreak = document.getElementById('current-streak');
      const totalDecksCompleted = document.getElementById('total-decks-completed');
      const recentCards = document.getElementById('recent-cards');
      const cardsMastered = document.getElementById('cards-mastered');
      const cardsDue = document.getElementById('cards-due');
      const studyTime = document.getElementById('study-time');
      const loadingOverlay = document.getElementById('loading-overlay');
      const confettiCanvas = document.getElementById('confetti-canvas');
      const progressChartCtx = document.getElementById('progress-chart').getContext('2d');

      // State variables
      let decks = [];
      let currentDeck = null;
      let currentCards = [];
      let currentCardIndex = 0;
      let learnedCards = JSON.parse(localStorage.getItem('learnedCards')) || {};
      let difficultCards = JSON.parse(localStorage.getItem('difficultCards')) || {};
      let displayMode = 'text'; // 'text', 'text-image', 'image'
      let currentGroupFilter = 'all'; // 'all', 'kids', 'students', 'adults'
      let streak = parseInt(localStorage.getItem('flashcardStreak')) || 0;
      let lastStudyDate = localStorage.getItem('lastStudyDate');
      let studyStartTime = null;
      let totalStudyTime = parseInt(localStorage.getItem('totalStudyTime')) || 0;
      let progressChart = null;
      let confetti = null;

      // Initialize
      loadDecks();
      updateProgressStats();
      checkAndUpdateStreak();
      setupEventListeners();


          // Fixed Theme Toggle
    function setupThemeToggle() {
      const themeToggle = document.getElementById('theme-toggle');
      const html = document.documentElement;
      
      // Initialize based on saved preference or system preference
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      
      if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
        html.classList.add('dark');
        localStorage.setItem('theme', 'dark');
      } else {
        html.classList.remove('dark');
        localStorage.setItem('theme', 'light');
      }
      
      // Update icon initially
      updateThemeIcon();
      
      themeToggle.addEventListener('click', () => {
        html.classList.toggle('dark');
        const isDark = html.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        updateThemeIcon();
      });
      
      function updateThemeIcon() {
        const isDark = html.classList.contains('dark');
        document.querySelector('.fa-moon').classList.toggle('hidden', isDark);
        document.querySelector('.fa-sun').classList.toggle('hidden', !isDark);
      }
    }

    // Fixed Confetti Initialization
    function initializeConfetti() {
      try {
        confetti = window.confetti ? window.confetti : null;
        if (confetti) {
          confettiCanvas.style.display = 'none';
        }
      } catch (e) {
        console.warn('Confetti initialization failed:', e);
        confetti = { fire: () => {} }; // Fallback
      }
    }

    // Fixed Hero Card Animation
    function initializeHeroCard() {
      const heroCard = document.getElementById('hero-flashcard');
      if (!heroCard) return;
      
      let flipInterval;
      
      function flipHeroCard() {
        heroCard.classList.toggle('flipped');
      }
      
      function startFlipInterval() {
        clearInterval(flipInterval);
        flipInterval = setInterval(flipHeroCard, 5000);
      }
      
      // Start initial interval
      startFlipInterval();
      
      // Make it clickable
      heroCard.addEventListener('click', () => {
        flipHeroCard();
        startFlipInterval(); // Reset timer on click
      });
    }

    // Initialize everything
    setupThemeToggle();
    initializeConfetti();
    initializeHeroCard();

    // Mobile menu toggle
    document.getElementById('mobile-menu-button').addEventListener('click', () => {
      document.getElementById('mobile-menu').classList.toggle('hidden');
    });

    // Back to top button
    window.addEventListener('scroll', () => {
      const backToTopButton = document.getElementById('back-to-top');
      if (window.pageYOffset > 300) {
        backToTopButton.classList.remove('opacity-0', 'invisible');
        backToTopButton.classList.add('opacity-100', 'visible');
      } else {
        backToTopButton.classList.remove('opacity-100', 'visible');
        backToTopButton.classList.add('opacity-0', 'invisible');
      }
    });

    document.getElementById('back-to-top').addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });


      // Load flashcard decks from JSON file
      function loadDecks() {
        showLoading(true);
        fetch('data/flashcards.json')
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.json();
          })
          .then(data => {
            // Add validation
            if (!data || !data.decks || !Array.isArray(data.decks)) {
              throw new Error('Invalid data format');
            }

            decks = data.decks.map(deck => ({
              ...deck,
              cardCount: deck.cards.length,
              lastStudied: deck.lastStudied || null,
              mastery: calculateDeckMastery(deck.id)
            }));

            renderDecks();
            initializeProgressChart();
            showLoading(false);
          })
          .catch(error => {
            console.error('Error loading flashcards:', error);
            loadDemoDecks();
            showLoading(false);
          });

        document.querySelector('#community button').addEventListener('click', () => {
          showToast('Create deck feature coming soon!', 'info');
        });
      }
      // Fallback demo data if JSON fetch fails
      function loadDemoDecks() {
        decks = [
          {
            id: "math-basics",
            title: "Math Basics",
            category: "Math",
            group: "Students",
            description: "Fundamental math concepts and formulas",
            cardCount: 5,
            cards: [
              { front: "Sample front 1", back: "Sample back 1", image: null },
              { front: "Sample front 2", back: "Sample back 2", image: null },
              { front: "Sample front 3", back: "Sample back 3", image: null },
              { front: "Sample front 4", back: "Sample back 4", image: null },
              { front: "Sample front 5", back: "Sample back 5", image: null }
            ],
            lastStudied: null,
            mastery: 0
          },
          {
            id: "world-flags",
            title: "World Flags",
            category: "Geography",
            group: "Kids",
            description: "Identify countries by their flags",
            cardCount: 5,
            cards: [
              { front: "Sample front 1", back: "Sample back 1", image: null },
              { front: "Sample front 2", back: "Sample back 2", image: null },
              { front: "Sample front 3", back: "Sample back 3", image: null },
              { front: "Sample front 4", back: "Sample back 4", image: null },
              { front: "Sample front 5", back: "Sample back 5", image: null }
            ],
            lastStudied: null,
            mastery: 0
          }
        ];
        renderDecks();
        initializeProgressChart();
        showToast('Using demo data - could not load flashcards.json', 'error');
        showLoading(false);
      }

      // Calculate deck mastery percentage
      function calculateDeckMastery(deckId) {
        const deckCards = Object.values(learnedCards).filter(card => card.deckId === deckId);
        const totalCards = decks.find(d => d.id === deckId)?.cardCount || 1;
        return Math.round((deckCards.length / totalCards) * 100);
      }

      // Render decks based on current filter
      function renderDecks() {
        deckContainer.innerHTML = '';

        const filteredDecks = currentGroupFilter === 'all'
          ? decks
          : decks.filter(deck => deck.group.toLowerCase() === currentGroupFilter);

        if (filteredDecks.length === 0) {
          deckContainer.innerHTML = `
        <div class="col-span-full text-center py-12">
          <div class="inline-flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-800 rounded-full mb-4">
            <i class="fas fa-search text-2xl text-gray-400"></i>
          </div>
          <h3 class="text-xl font-bold mb-2">No decks found</h3>
          <p class="text-gray-500 dark:text-gray-400 mb-4">No decks match the current filter criteria.</p>
          <button onclick="resetGroupFilter()" class="px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg transition">
            Reset Filters
          </button>
        </div>
      `;
          return;
        }

        filteredDecks.forEach(deck => {
          const deckElement = document.createElement('div');
          deckElement.className = 'deck-card bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 transition-all hover:shadow-lg';
          deckElement.innerHTML = `
        <div class="relative">
          <div class="absolute top-4 right-4 z-10">
            <span class="px-2 py-1 rounded-full text-xs ${getGroupColorClass(deck.group)}">${deck.group}</span>
          </div>
          <div class="h-40 bg-gradient-to-r ${getCategoryGradientClass(deck.category)} flex items-center justify-center">
            <i class="${getCategoryIcon(deck.category)} text-4xl text-white opacity-80"></i>
          </div>
        </div>
        <div class="p-6">
          <div class="flex justify-between items-start mb-3">
            <h3 class="text-lg font-bold font-heading">${deck.title}</h3>
            <div class="flex items-center">
              <span class="text-xs font-medium ${deck.mastery >= 80 ? 'text-secondary' : deck.mastery >= 50 ? 'text-accent' : 'text-gray-500'}">
                ${deck.mastery}%
              </span>
            </div>
          </div>
          <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">${deck.description}</p>
          <div class="flex justify-between items-center text-sm">
            <span class="text-gray-500 dark:text-gray-400">${deck.cardCount} cards</span>
            <div class="flex items-center space-x-2">
              ${deck.lastStudied ? `
                <span class="text-xs text-gray-500 dark:text-gray-400" title="Last studied ${formatRelativeTime(deck.lastStudied)}">
                  <i class="far fa-clock mr-1"></i>${formatRelativeTime(deck.lastStudied)}
                </span>
              ` : ''}
            </div>
          </div>
        </div>
      `;

          deckElement.addEventListener('click', () => loadDeck(deck.id));
          deckContainer.appendChild(deckElement);
        });
      }

      // Load a specific deck
      function loadDeck(deckId) {
        const deck = decks.find(d => d.id === deckId);
        if (!deck) return;

        currentDeck = deck;
        currentDeckTitle.textContent = deck.title;
        deckCategory.textContent = deck.category;
        deckGroup.textContent = deck.group;
        currentCards = [...deck.cards]; // Create a copy of the cards array
        currentCardIndex = 0;

        // Start study session timer
        studyStartTime = new Date();

        showDeckView();
        showCurrentCard();
      }

      // Start a random deck
      function startRandomDeck() {
        if (decks.length === 0) return;

        // Filter decks that have cards due for review
        const dueDecks = decks.filter(deck => {
          const dueCards = deck.cards.filter((_, index) => isCardDue(`${deck.id}-${index}`));
          return dueCards.length > 0;
        });

        // If there are decks with due cards, pick from those
        const decksToChooseFrom = dueDecks.length > 0 ? dueDecks : decks;
        const randomIndex = Math.floor(Math.random() * decksToChooseFrom.length);
        loadDeck(decksToChooseFrom[randomIndex].id);
      }

      // Check if a card is due for review
      function isCardDue(cardId) {
        if (!learnedCards[cardId]) return true;

        const cardData = learnedCards[cardId];
        const now = new Date();
        const lastReviewed = new Date(cardData.lastReviewed);
        const daysSinceReview = Math.floor((now - lastReviewed) / (1000 * 60 * 60 * 24));

        // Simple spaced repetition algorithm
        const intervals = [1, 3, 7, 14, 30]; // Days between reviews
        const currentInterval = intervals[Math.min(cardData.repetitions, intervals.length - 1)];

        return daysSinceReview >= currentInterval;
      }

      // Show the deck view and hide the selector
      function showDeckView() {
        document.querySelector('#decks').style.display = 'none';
        flashcardDisplay.style.display = 'block';
        flashcardDisplay.classList.remove('hidden');
        updateProgressBar();

        // Scroll to top of flashcard display
        flashcardDisplay.scrollIntoView({ behavior: 'smooth' });
      }

      // Show the deck selector and hide the deck view
      function showDeckSelector() {
        // Record study time
        if (studyStartTime) {
          const studyEndTime = new Date();
          const studyDuration = (studyEndTime - studyStartTime) / 1000 / 60; // in minutes
          totalStudyTime += Math.round(studyDuration);
          localStorage.setItem('totalStudyTime', totalStudyTime.toString());
          studyTime.textContent = Math.floor(totalStudyTime / 60); // Convert to hours
          studyStartTime = null;
        }

        document.querySelector('#decks').style.display = 'block';
        flashcardDisplay.style.display = 'none';
        flashcard.classList.remove('flipped');

        // Update deck mastery and last studied
        if (currentDeck) {
          currentDeck.mastery = calculateDeckMastery(currentDeck.id);
          currentDeck.lastStudied = new Date().toISOString();
          renderDecks();
        }

        // Update progress chart
        updateProgressChart();
      }

      // Flip the current card
      function flipCard() {
        flashcard.classList.toggle('flipped');
      }

      // Show the current card
      function showCurrentCard() {
        if (currentCards.length === 0 || currentCardIndex < 0 || currentCardIndex >= currentCards.length) return;

        const card = currentCards[currentCardIndex];
        flashcard.classList.remove('flipped');

        // Clear previous content
        frontContent.innerHTML = '';
        backContent.innerHTML = '';

        // Display based on current mode
        if (displayMode === 'text' || displayMode === 'text-image') {
          const frontText = document.createElement('div');
          frontText.className = 'text-2xl md:text-3xl font-bold font-heading mb-4';
          frontText.textContent = card.front;
          frontContent.appendChild(frontText);

          const backText = document.createElement('div');
          backText.className = 'text-2xl md:text-3xl font-bold font-heading mb-4';
          backText.textContent = card.back;
          backContent.appendChild(backText);

          // Add hint if available
          if (card.hint) {
            const hintElement = document.createElement('div');
            hintElement.className = 'text-sm text-gray-500 dark:text-gray-400 mt-2 italic';
            hintElement.innerHTML = `<i class="fas fa-lightbulb mr-1"></i> ${card.hint}`;
            frontContent.appendChild(hintElement);
          }
        }

        if ((displayMode === 'text-image' || displayMode === 'image') && card.image) {
          const frontImg = document.createElement('img');
          frontImg.src = card.image;
          frontImg.alt = card.front;
          frontImg.className = 'max-h-48 md:max-h-56 mx-auto mb-6 rounded-lg object-contain';
          frontContent.insertBefore(frontImg, frontContent.firstChild);

          const backImg = document.createElement('img');
          backImg.src = card.image;
          backImg.alt = card.back;
          backImg.className = 'max-h-48 md:max-h-56 mx-auto mb-6 rounded-lg object-contain';
          backContent.insertBefore(backImg, backContent.firstChild);
        } else if (displayMode === 'image') {
          frontContent.innerHTML = `
        <div class="text-center py-12">
          <div class="w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-image text-2xl text-gray-400"></i>
          </div>
          <p class="text-gray-500 dark:text-gray-400">No image available for this card</p>
        </div>
      `;
          backContent.innerHTML = `
        <div class="text-center py-12">
          <div class="w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-image text-2xl text-gray-400"></i>
          </div>
          <p class="text-gray-500 dark:text-gray-400">No image available for this card</p>
        </div>
      `;
        }

        // Add example if available
        if (card.example) {
          const exampleElement = document.createElement('div');
          exampleElement.className = 'bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mt-4 text-sm';
          exampleElement.innerHTML = `<strong>Example:</strong> ${card.example}`;
          backContent.appendChild(exampleElement);
        }

        // Update progress indicators
        cardProgressText.textContent = `Card ${currentCardIndex + 1} of ${currentCards.length}`;
        progressPercent.textContent = `${Math.round(((currentCardIndex + 1) / currentCards.length) * 100)}%`;
        updateProgressBar();

        // Update button states
        prevCardBtn.disabled = currentCardIndex === 0;
        nextCardBtn.disabled = currentCardIndex === currentCards.length - 1;

        // Update learned status button
        updateCardButtons();
      }

      // Show the next card
      function showNextCard() {
        if (currentCardIndex < currentCards.length - 1) {
          currentCardIndex++;
          showCurrentCard();
        } else if (currentCardIndex === currentCards.length - 1) {
          // Reached end of deck
          showToast('You\'ve reached the end of this deck!', 'success');
          triggerConfetti();
        }
      }

      // Show the previous card
      function showPreviousCard() {
        if (currentCardIndex > 0) {
          currentCardIndex--;
          showCurrentCard();
        }
      }

      // Mark current card as learned
      function markCardAsLearned() {
        if (!currentDeck || currentCards.length === 0) return;

        const cardId = `${currentDeck.id}-${currentCardIndex}`;
        const now = new Date().toISOString();

        if (learnedCards[cardId]) {
          // Update existing record
          learnedCards[cardId] = {
            ...learnedCards[cardId],
            lastReviewed: now,
            repetitions: (learnedCards[cardId].repetitions || 0) + 1
          };
        } else {
          // New learned card
          learnedCards[cardId] = {
            deckId: currentDeck.id,
            cardIndex: currentCardIndex,
            dateLearned: now,
            lastReviewed: now,
            repetitions: 1
          };

          // Show celebration for new card
          showToast('Card mastered!', 'success');
          triggerConfetti();
        }

        // Remove from difficult cards if it was there
        if (difficultCards[cardId]) {
          delete difficultCards[cardId];
          localStorage.setItem('difficultCards', JSON.stringify(difficultCards));
        }

        localStorage.setItem('learnedCards', JSON.stringify(learnedCards));
        updateCardButtons();
        updateProgressStats();

        // Auto-advance to next card after short delay
        setTimeout(() => {
          if (currentCardIndex < currentCards.length - 1) {
            showNextCard();
          }
        }, 800);
      }

      // Mark current card as difficult
      function markCardAsDifficult() {
        if (!currentDeck || currentCards.length === 0) return;

        const cardId = `${currentDeck.id}-${currentCardIndex}`;

        if (difficultCards[cardId]) {
          delete difficultCards[cardId];
          showToast('Card removed from difficult list', 'info');
        } else {
          difficultCards[cardId] = {
            deckId: currentDeck.id,
            cardIndex: currentCardIndex,
            dateMarked: new Date().toISOString()
          };
          showToast('Card marked as difficult', 'warning');
        }

        localStorage.setItem('difficultCards', JSON.stringify(difficultCards));
        updateCardButtons();
      }

      // Update the card action buttons
      function updateCardButtons() {
        if (!currentDeck || currentCards.length === 0) return;

        const cardId = `${currentDeck.id}-${currentCardIndex}`;
        const isLearned = learnedCards[cardId];
        const isDifficult = difficultCards[cardId];

        // Update learned button
        if (isLearned) {
          markLearnedBtn.innerHTML = '<i class="fas fa-check-circle mr-2"></i> Mastered';
          markLearnedBtn.className = 'px-6 py-2 bg-secondary hover:bg-secondary-dark text-white rounded-lg transition flex items-center font-medium';
        } else {
          markLearnedBtn.innerHTML = '<i class="fas fa-check-circle mr-2"></i> Got It!';
          markLearnedBtn.className = 'px-6 py-2 bg-white hover:bg-gray-100 text-primary rounded-lg transition flex items-center font-medium';
        }

        // Update difficult button
        if (isDifficult) {
          difficultCardBtn.innerHTML = '<i class="fas fa-times-circle mr-2"></i> Remove Difficult';
          difficultCardBtn.className = 'px-6 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition flex items-center';
        } else {
          difficultCardBtn.innerHTML = '<i class="fas fa-times-circle mr-2"></i> Difficult';
          difficultCardBtn.className = 'px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition flex items-center';
        }

        // Update cards mastered count
        const deckCards = Object.keys(learnedCards).filter(id => id.startsWith(currentDeck.id));
        cardsMastered.textContent = deckCards.length;

        // Update cards due count
        const dueCards = currentCards.filter((_, index) => isCardDue(`${currentDeck.id}-${index}`));
        cardsDue.textContent = dueCards.length;
      }

      // Shuffle the current deck
      function shuffleCurrentDeck() {
        if (currentCards.length === 0) return;

        // Fisher-Yates shuffle algorithm
        for (let i = currentCards.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [currentCards[i], currentCards[j]] = [currentCards[j], currentCards[i]];
        }

        currentCardIndex = 0;
        showCurrentCard();

        // Show shuffle confirmation
        showToast('Deck shuffled!', 'success');
      }

      // Change display mode (text, text+image, image)
      function changeDisplayMode() {
        const modes = ['text', 'text-image', 'image'];
        const currentIndex = modes.indexOf(displayMode);
        displayMode = modes[(currentIndex + 1) % modes.length];

        // Update button text
        const modeNames = {
          'text': 'Text Only',
          'text-image': 'Text + Image',
          'image': 'Image Only'
        };
        modeText.textContent = modeNames[displayMode];

        showCurrentCard();
      }

      // Toggle group filter
      function toggleGroupFilter() {
        const groups = ['all', 'kids', 'students', 'adults'];
        const currentIndex = groups.indexOf(currentGroupFilter);
        currentGroupFilter = groups[(currentIndex + 1) % groups.length];

        // Update button text
        const groupNames = {
          'all': 'All Groups',
          'kids': 'Kids Only',
          'students': 'Students Only',
          'adults': 'Adults Only'
        };
        filterGroupBtn.innerHTML = `<i class="fas fa-filter mr-2"></i> ${groupNames[currentGroupFilter]}`;

        renderDecks();
      }

      // Reset group filter to show all decks
      function resetGroupFilter() {
        currentGroupFilter = 'all';
        filterGroupBtn.innerHTML = '<i class="fas fa-filter mr-2"></i> All Groups';
        renderDecks();
      }

      // Shuffle all decks
      function shuffleDecks() {
        // Fisher-Yates shuffle algorithm
        for (let i = decks.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [decks[i], decks[j]] = [decks[j], decks[i]];
        }

        renderDecks();
        showToast('Decks shuffled!', 'success');
      }

      // Update progress bar
      function updateProgressBar() {
        if (currentCards.length === 0) return;

        const progress = ((currentCardIndex + 1) / currentCards.length) * 100;
        progressBar.style.width = `${progress}%`;

        // Update progress ring
        const circle = document.querySelector('.progress-ring-circle:last-child');
        if (circle) {
          const radius = 45;
          const circumference = 2 * Math.PI * radius;
          const offset = circumference - (progress / 100) * circumference;
          circle.style.strokeDashoffset = offset;
          circle.style.strokeDasharray = circumference;
        }
      }

      // Update streak counter
      function updateStreak() {
        const today = new Date().toISOString().split('T')[0];

        if (lastStudyDate !== today) {
          // Check if yesterday was studied to continue streak
          const yesterday = new Date();
          yesterday.setDate(yesterday.getDate() - 1);
          const yesterdayStr = yesterday.toISOString().split('T')[0];

          if (lastStudyDate === yesterdayStr) {
            streak++;
            showToast(`Streak increased to ${streak} days!`, 'success');
          } else if (!lastStudyDate) {
            streak = 1; // First time studying
          } else {
            streak = 1; // Reset streak if not consecutive
            showToast('New streak started!', 'info');
          }

          lastStudyDate = today;
          localStorage.setItem('flashcardStreak', streak.toString());
          localStorage.setItem('lastStudyDate', lastStudyDate);

          // Update UI
          streakCount.textContent = streak;
          currentStreak.textContent = streak;

          // Show streak animation if increased
          if (streak > 1) {
            const streakDisplay = document.getElementById('streak-display');
            streakDisplay.classList.add('animate-pulse');
            setTimeout(() => {
              streakDisplay.classList.remove('animate-pulse');
            }, 1000);
          }
        }
      }

      // Check and update streak on page load
      function checkAndUpdateStreak() {
        const today = new Date().toISOString().split('T')[0];

        if (lastStudyDate && lastStudyDate !== today) {
          const lastDate = new Date(lastStudyDate);
          const todayDate = new Date(today);
          const dayDiff = Math.floor((todayDate - lastDate) / (1000 * 60 * 60 * 24));

          if (dayDiff > 1) {
            // Reset streak if more than one day has passed
            streak = 0;
            localStorage.setItem('flashcardStreak', '0');
          }
        }

        streakCount.textContent = streak;
        currentStreak.textContent = streak;
      }

      // Update progress statistics
      function updateProgressStats() {
        const learnedCount = Object.keys(learnedCards).length;
        totalCardsLearned.textContent = learnedCount;

        // Calculate completed decks (80% mastery)
        const completedDecks = decks.filter(deck => {
          const deckCards = Object.keys(learnedCards).filter(id => id.startsWith(deck.id));
          return deckCards.length >= deck.cardCount * 0.8;
        }).length;

        totalDecksCompleted.textContent = completedDecks;

        // Update study time
        studyTime.textContent = Math.floor(totalStudyTime / 60); // Convert to hours

        // Show recently learned cards
        showRecentlyLearned();
      }

      // Show recently learned cards
      function showRecentlyLearned() {
        recentCards.innerHTML = '';

        const recent = Object.entries(learnedCards)
          .sort((a, b) => new Date(b[1].lastReviewed || b[1].dateLearned) - new Date(a[1].lastReviewed || a[1].dateLearned))
          .slice(0, 3);

        if (recent.length === 0) {
          recentCards.innerHTML = `
        <div class="text-center py-4">
          <p class="text-gray-500 dark:text-gray-400">No recently learned cards yet.</p>
        </div>
      `;
          return;
        }

        recent.forEach(([cardId, data]) => {
          const deck = decks.find(d => d.id === data.deckId);
          if (!deck) return;

          const card = deck.cards[data.cardIndex];
          if (!card) return;

          const cardElement = document.createElement('div');
          cardElement.className = 'bg-gray-50 dark:bg-gray-700 p-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition cursor-pointer';
          cardElement.innerHTML = `
        <div class="flex items-start">
          <div class="w-10 h-10 rounded-full ${getCategoryColorClass(deck.category)}/10 flex items-center justify-center mr-3 mt-1">
            <i class="${getCategoryIcon(deck.category)} ${getCategoryColorClass(deck.category)}"></i>
          </div>
          <div class="flex-1">
            <h4 class="font-medium">${deck.title}</h4>
            <p class="text-sm text-gray-500 dark:text-gray-400 truncate">${card.front}</p>
            <div class="flex justify-between items-center mt-2">
              <span class="text-xs text-gray-500 dark:text-gray-400">${formatRelativeTime(data.lastReviewed || data.dateLearned)}</span>
              <span class="text-xs px-2 py-1 rounded-full ${getGroupColorClass(deck.group)}">${deck.group}</span>
            </div>
          </div>
        </div>
      `;

          cardElement.addEventListener('click', () => {
            loadDeck(deck.id);
            // Scroll to the specific card (implementation depends on your UI)
            setTimeout(() => {
              currentCardIndex = data.cardIndex;
              showCurrentCard();
            }, 100);
          });

          recentCards.appendChild(cardElement);
        });
      }

      // Initialize progress chart
      function initializeProgressChart() {
        if (progressChart) {
          progressChart.destroy();
        }

        const labels = decks.map(deck => deck.title);
        const masteryData = decks.map(deck => deck.mastery);
        const colors = decks.map(deck => getCategoryColorClass(deck.category));

        progressChart = new Chart(progressChartCtx, {
          type: 'bar',
          data: {
            labels: labels,
            datasets: [{
              label: 'Mastery %',
              data: masteryData,
              backgroundColor: colors,
              borderColor: colors.map(color => darkenColor(color)),
              borderWidth: 1,
              borderRadius: 4
            }]
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                display: false
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return `${context.dataset.label}: ${context.raw}%`;
                  }
                }
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                max: 100,
                ticks: {
                  callback: function (value) {
                    return value + '%';
                  }
                }
              }
            }
          }
        });
      }

      // Update progress chart
      function updateProgressChart() {
        if (!progressChart) return;

        // Update mastery for all decks
        decks.forEach(deck => {
          deck.mastery = calculateDeckMastery(deck.id);
        });

        // Update chart data
        progressChart.data.datasets[0].data = decks.map(deck => deck.mastery);
        progressChart.update();
      }

  

      // Trigger confetti animation
      function triggerConfetti() {
        confettiCanvas.style.display = 'block';

        confetti({
          particleCount: 150,
          spread: 70,
          origin: { y: 0.6 }
        });

        setTimeout(() => {
          confettiCanvas.style.display = 'none';
        }, 3000);
      }

      // Show loading overlay
      function showLoading(show) {
        if (show) {
          loadingOverlay.style.opacity = '1';
          loadingOverlay.style.pointerEvents = 'auto';
        } else {
          loadingOverlay.style.opacity = '0';
          setTimeout(() => {
            loadingOverlay.style.pointerEvents = 'none';
          }, 300);
        }
      }

         // Helper function to format date as relative time
      function formatRelativeTime(dateString) {
        const date = new Date(dateString);
        const now = new Date();
        const diffInSeconds = Math.floor((now - date) / 1000);

        if (diffInSeconds < 60) return 'Just now';
        if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;
        if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)}h ago`;
        if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)}d ago`;
        return date.toLocaleDateString();
      }

      // Helper function to show toast messages
      function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `fixed bottom-6 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-xl shadow-lg text-white z-50 animate-fade-in-up ${type === 'success' ? 'bg-secondary' :
          type === 'error' ? 'bg-red-500' :
            type === 'warning' ? 'bg-accent' :
              'bg-primary'
          }`;
        toast.innerHTML = `
      <div class="flex items-center">
        <i class="fas ${type === 'success' ? 'fa-check-circle' :
            type === 'error' ? 'fa-exclamation-circle' :
              type === 'warning' ? 'fa-exclamation-triangle' :
                'fa-info-circle'
          } mr-2"></i>
        <span>${message}</span>
      </div>
    `;
        document.body.appendChild(toast);

        setTimeout(() => {
          toast.classList.add('animate-fade-out');
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }

      // Helper function to get category color class
      function getCategoryColorClass(category) {
        const lowerCategory = category.toLowerCase();

        if (lowerCategory.includes('math')) return 'text-science';
        if (lowerCategory.includes('science')) return 'text-science';
        if (lowerCategory.includes('history')) return 'text-history';
        if (lowerCategory.includes('islamic') || lowerCategory.includes('religion')) return 'text-islamic';
        if (lowerCategory.includes('language')) return 'text-poetry';
        if (lowerCategory.includes('tech')) return 'text-tech';
        if (lowerCategory.includes('geo')) return 'text-general';

        return 'text-primary';
      }

      // Helper function to get category gradient class
      function getCategoryGradientClass(category) {
        const lowerCategory = category.toLowerCase();

        if (lowerCategory.includes('math')) return 'from-science to-blue-400';
        if (lowerCategory.includes('science')) return 'from-science to-blue-400';
        if (lowerCategory.includes('history')) return 'from-history to-purple-400';
        if (lowerCategory.includes('islamic') || lowerCategory.includes('religion')) return 'from-islamic to-pink-400';
        if (lowerCategory.includes('language')) return 'from-poetry to-indigo-400';
        if (lowerCategory.includes('tech')) return 'from-tech to-green-400';
        if (lowerCategory.includes('geo')) return 'from-general to-gray-400';

        return 'from-primary to-indigo-400';
      }

      // Helper function to get category icon
      function getCategoryIcon(category) {
        const lowerCategory = category.toLowerCase();

        if (lowerCategory.includes('math')) return 'fas fa-square-root-alt';
        if (lowerCategory.includes('science')) return 'fas fa-flask';
        if (lowerCategory.includes('history')) return 'fas fa-landmark';
        if (lowerCategory.includes('islamic') || lowerCategory.includes('religion')) return 'fas fa-mosque';
        if (lowerCategory.includes('language')) return 'fas fa-language';
        if (lowerCategory.includes('tech')) return 'fas fa-laptop-code';
        if (lowerCategory.includes('geo')) return 'fas fa-globe-americas';

        return 'fas fa-book';
      }

      // Helper function to get group color class
      function getGroupColorClass(group) {
        switch (group.toLowerCase()) {
          case 'kids': return 'bg-kids text-white';
          case 'students': return 'bg-science text-white';
          case 'adults': return 'bg-primary text-white';
          default: return 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200';
        }
      }

      // Helper function to darken color
      function darkenColor(colorClass) {
        const colorMap = {
          'text-science': '#2563eb',
          'text-history': '#7c3aed',
          'text-islamic': '#db2777',
          'text-primary': '#4f46e5',
          'text-secondary': '#10b981',
          'text-accent': '#f59e0b'
        };

        return colorMap[colorClass] || '#4f46e5';
      }

      // Set up event listeners
      function setupEventListeners() {
        flashcard.addEventListener('click', flipCard);
        prevCardBtn.addEventListener('click', showPreviousCard);
        nextCardBtn.addEventListener('click', showNextCard);
        markLearnedBtn.addEventListener('click', markCardAsLearned);
        difficultCardBtn.addEventListener('click', markCardAsDifficult);
        backToDecksBtn.addEventListener('click', showDeckSelector);
        shuffleCardsBtn.addEventListener('click', shuffleCurrentDeck);
        changeModeBtn.addEventListener('click', changeDisplayMode);
        startLearningBtn.addEventListener('click', startRandomDeck);
        startLearningCta.addEventListener('click', startRandomDeck);
        filterGroupBtn.addEventListener('click', toggleGroupFilter);
        shuffleDecksBtn.addEventListener('click', shuffleDecks);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
          if (flashcardDisplay.style.display !== 'block') return;

          switch (e.key) {
            case 'ArrowLeft':
              if (!prevCardBtn.disabled) showPreviousCard();
              break;
            case 'ArrowRight':
              if (!nextCardBtn.disabled) showNextCard();
              break;
            case ' ':
              flipCard();
              break;
            case '1':
              markCardAsDifficult();
              break;
            case '2':
              markCardAsLearned();
              break;
          }
        });

        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
          mobileMenu.classList.toggle('hidden');
        });

      
        // Back to top button
        const backToTopButton = document.getElementById('back-to-top');
        window.addEventListener('scroll', () => {
          if (window.pageYOffset > 300) {
            backToTopButton.classList.remove('opacity-0', 'invisible');
            backToTopButton.classList.add('opacity-100', 'visible');
          } else {
            backToTopButton.classList.remove('opacity-100', 'visible');
            backToTopButton.classList.add('opacity-0', 'invisible');
          }
        });
        backToTopButton.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Add this to your setupEventListeners function
        document.querySelector('#community button').addEventListener('click', () => {
          showToast('Create deck feature coming soon!', 'info');
        });
      }
    });

    // Make resetGroupFilter available globally
    window.resetGroupFilter = function () {
      const event = new Event('click');
      document.getElementById('filter-group').dispatchEvent(event);
    };

    // Confetti library (simplified version)
    const confetti = {
      create: function (canvas, options) {
        const ctx = canvas.getContext('2d');
        const particles = [];
        let particleCount = 0;
        let animationId = null;

        function Particle(x, y) {
          this.x = x;
          this.y = y;
          this.size = Math.random() * 8 + 3;
          this.weight = Math.random() * 2 + 1;
          this.direction = Math.random() * Math.PI * 2;
          this.speed = Math.random() * 3 + 2;
          this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
          this.rotation = Math.random() * 360;
          this.rotationSpeed = Math.random() * 5 - 2.5;
        }

        function updateParticles() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          for (let i = 0; i < particles.length; i++) {
            const p = particles[i];
            p.rotation += p.rotationSpeed;
            p.direction += 0.01;
            p.x += Math.cos(p.direction) * p.speed;
            p.y += p.weight;

            if (p.y > canvas.height) {
              particles.splice(i, 1);
              i--;
              continue;
            }

            ctx.save();
            ctx.translate(p.x, p.y);
            ctx.rotate(p.rotation * Math.PI / 180);
            ctx.fillStyle = p.color;
            ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
            ctx.restore();
          }

          if (particles.length > 0) {
            animationId = requestAnimationFrame(updateParticles);
          }
        }

        return {
          fire: function (options) {
            const { particleCount = 50, spread = 70, origin = { x: 0.5, y: 0.5 } } = options || {};

            for (let i = 0; i < particleCount; i++) {
              const x = canvas.width * origin.x + (Math.random() - 0.5) * spread;
              const y = canvas.height * origin.y + (Math.random() - 0.5) * spread;
              particles.push(new Particle(x, y));
            }

            if (!animationId) {
              updateParticles();
            }
          }
        };
      }
    };

    // Add animation styles
    const style = document.createElement('style');
    style.textContent = `
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes fade-out {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(20px);
    }
  }
  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }
  .animate-fade-in-up {
    animation: fade-in-up 0.3s ease-out forwards;
  }
  .animate-fade-out {
    animation: fade-out 0.3s ease-out forwards;
  }
  .animate-blob {
    animation: blob 7s infinite;
  }
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  .animation-delay-4000 {
    animation-delay: 4s;
  }
`;
    document.head.appendChild(style);
  </script>
  <script src="src/js/analytics.js"></script>
</body>

</html>